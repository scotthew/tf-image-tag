services:
  # https://docs.docker.com/compose/gpu-support/
  tensorflow:
    env_file:
      - .env
    container_name: tf_gpu_1
    build:
      context: ./
      dockerfile: Dockerfile
    volumes:
      - ./:/workspace
    deploy:
      resources:
        reservations:
          devices:
            - capabilities: [gpu]

  tensorflow-jupyter:
    env_file:
      - .env
    container_name: tf_jupyter_1
    build:
      context: ./
      dockerfile: Dockerfile-jupyter
    volumes:
      - ./:/workspace
